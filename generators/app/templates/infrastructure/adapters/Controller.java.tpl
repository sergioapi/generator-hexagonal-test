package <%= groupID %>;

import <%=pathModel%>.<%=entityName%>;
import <%=pathUseCase%>.<%=entityName%>UseCase;
import lombok.RequiredArgsConstructor;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;

// Autogenerated <%=entityName%> Controller class.

@RestController
@RequestMapping("/<%=entityVarName%>s")
@RequiredArgsConstructor
public class <%=entityName%>Controller {

    private final <%=entityName%>UseCase <%=entityVarName%>UseCase;

    @PostMapping
    public ResponseEntity<<%=entityName%>> create<%=entityName%>(@RequestBody <%=entityName%> <%=entityVarName%>) {
        return ResponseEntity.ok(<%=entityVarName%>UseCase.create<%=entityName%>(<%=entityVarName%>));
    }

    @PutMapping("/{id}")
    public ResponseEntity<<%=entityName%>> update<%=entityName%>(@PathVariable Long id, @RequestBody <%=entityName%> update<%=entityName%>) {
        return Optional.ofNullable(<%=entityVarName%>UseCase.update<%=entityName%>(id, update<%=entityName%>))
                .map(<%=entityVarName%> -> new ResponseEntity<>(<%=entityVarName%>, HttpStatus.OK))
                .orElseGet(() -> new ResponseEntity<>(HttpStatus.NOT_FOUND));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> delete<%=entityName%>(@PathVariable Long id) {
        if (!<%=entityVarName%>UseCase.delete<%=entityName%>(id)) {
            return new ResponseEntity<>(HttpStatus.NOT_FOUND);
        }
        return new ResponseEntity<>(HttpStatus.NO_CONTENT);
    }

    @GetMapping
    public ResponseEntity<List<<%=entityName%>>> getAll<%=entityName%>s() {
        return ResponseEntity.ok(<%=entityVarName%>UseCase.getAll<%=entityName%>s());
    }

    @GetMapping("/{id}")
    public ResponseEntity<<%=entityName%>> get<%=entityName%>ById(@PathVariable Long id) {
        return Optional.ofNullable(<%=entityVarName%>UseCase.get<%=entityName%>(id))
                .map(<%=entityVarName%> -> new ResponseEntity<>(<%=entityVarName%>, HttpStatus.OK))
                .orElseGet(() -> new ResponseEntity<>(HttpStatus.NOT_FOUND));
    }

}
