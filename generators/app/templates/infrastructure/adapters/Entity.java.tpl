package <%= groupID %>;

<% if (databaseEngine === 'mongodb') { %>
import org.springframework.data.annotation.Id;
import org.springframework.data.mongodb.core.mapping.Document;
import org.bson.types.ObjectId;
<% } else { %>
import jakarta.persistence.*;
<% } %>

import lombok.*;
<% if (needsListImport) { %>
import java.util.List;
<% } %>
<% for (importStatement of relationImports) { %>
import <%= importStatement %>;
<% } %>

// Autogenerated <%=model%> persistence entity class.

<% if (databaseEngine === 'mongodb') { %>
@Document(collection = "<%= model.toLowerCase() %>")
<% } else { %>
@Entity
<% } %>
@Data
public class <%=model%>Entity {

<% if (databaseEngine === 'mongodb') { %>
    @Id
    private ObjectId id;
        <% } else { %>
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
        <% } %>

<% fields.forEach(field => { -%>
    private <%= field.type %> <%= field.name %>;
<% }); -%>

<% if (databaseEngine !== 'mongodb') { %>
<% relations.forEach(rel => { %>
    <% if (rel.type === "OneToMany") { %>
    @OneToMany(mappedBy = "<%= rel.mappedBy %>")
    private List<<%= rel.targetEntity %>Entity> <%= rel.fieldName %>;
    <% } else if (rel.type === "ManyToMany") { %>
    @ManyToMany
    private List<<%= rel.targetEntity %>Entity> <%= rel.fieldName %>;
    <% } else if (rel.type === "ManyToOne") { %>
    @ManyToOne
    @JoinColumn(name = "<%= rel.fieldName %>_id")
    private <%= rel.targetEntity %>Entity <%= rel.fieldName %>;
    <% } else if (rel.type === "OneToOne") { %>
    @OneToOne
    private <%= rel.targetEntity %>Entity <%= rel.fieldName %>;
    <% } %>
<% }); %>
<% } else { %>
<% relations.forEach(rel => { %>
     <% if (rel.type === "ManyToOne") { %>
            private ObjectId <%= rel.fieldName %>;
        <% } %>
<% }); %>
<% } %>

}
